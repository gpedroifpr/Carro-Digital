<!DOCTYPE html>
<html>
<head>
    <title>Garagem Virtual IFPR</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
</head>
<body>
    <header class="site-header">
        <h1>GARAGEM TOP</h1>
        
        <div id="user-info" style="display: none;">
            <p>Bem-vindo de volta! <span id="user-email-display"></span></p>
            <button id="logout-btn">Sair</button>
        </div>
    </header>

    <!-- ===== SEÇÃO DE AUTENTICAÇÃO (FORA DO MAIN CONTENT) ===== -->
    <section id="auth-section">
        <!-- A div #user-info duplicada foi REMOVIDA daqui -->
        <div id="auth-container">
            <!-- Formulário de Login (inicialmente visível) -->
            <div id="login-form-container">
                <h2>Login</h2>
                <form id="login-form" class="auth-form">
                    <input type="email" id="login-email" placeholder="Seu e-mail" required>
                    <input type="password" id="login-password" placeholder="Sua senha" required>
                    <button type="submit">Entrar</button>
                    <p>Não tem uma conta? <a href="#" id="show-register">Registre-se</a></p>
                </form>
            </div>

            <!-- Formulário de Registro (inicialmente oculto) -->
            <div id="register-form-container" style="display: none;">
                <h2>Registro</h2>
                <form id="register-form" class="auth-form">
                    <input type="email" id="register-email" placeholder="Seu e-mail" required>
                    <input type="password" id="register-password" placeholder="Crie uma senha" required>
                    <button type="submit">Criar Conta</button>
                    <p>Já tem uma conta? <a href="#" id="show-login">Faça Login</a></p>
                </form>
            </div>
            <div id="auth-message" class="mensagem" style="display: none;"></div>
        </div>
    </section>

    <!-- ===== CONTEÚDO PRINCIPAL (SÓ APARECE DEPOIS DO LOGIN) ===== -->
    <main id="main-content" style="display: none;">
        
        <!-- Área de Mensagens Global da Garagem -->
        <div id="mensagemStatus" class="mensagem" style="display: none;"></div>

        <!-- Seleção de Veículos -->
        <h2>Selecione um Veículo</h2>
        <div id="selecaoVeiculosContainer" class="container-veiculos">
            <p>Carregando veículos...</p>
        </div>

        <hr>

        <div class="container-principal">
            <!-- Coluna de Informações e Controles -->
            <div class="coluna-controles">
                <h2>Veículo Selecionado</h2>
                <div id="informacoesVeiculo">Selecione um veículo na lista acima.</div>

                <div id="displayVeiculoSelecionado">
                    <p>Velocidade: <span id="veiculoVelocidadeDisplay">0</span> km/h</p>
                    <div class="velocimetro">
                        <div class="velocimetro-barra" id="velocimetroBarraDisplay" style="width: 0%;"></div>
                    </div>
                    <p>Status: <span id="veiculoStatusDisplay" class="status-desligado">Desligado</span></p>

                    <p id="displayTurbo" style="display: none;">Turbo: <span id="turboStatus">Desativado</span></p>
                    <div id="displayCarga" style="display: none;">
                       <p>Carga: <span id="cargaAtual">0</span>/<span id="capacidadeCargaSpan">--</span> kg</p>
                       <label for="quantidadeCarga">Qtd:</label>
                       <input type="number" id="quantidadeCarga" value="100" min="1" disabled>
                    </div>
                </div>

                <h2>Ações</h2>
                <div class="botoes-acao">
                    <button id="acaoLigarBtn" disabled>Ligar</button>
                    <button id="acaoDesligarBtn" disabled>Desligar</button>
                    <button id="acaoAcelerarBtn" disabled>Acelerar</button>
                    <button id="acaoFrearBtn" disabled>Frear</button>
                    <button id="acaoBuzinarBtn" disabled>Buzinar</button>
                    <button id="acaoAtivarTurboBtn" disabled>Ativar Turbo</button>
                    <button id="acaoDesativarTurboBtn" disabled>Desativar Turbo</button>
                    <button id="acaoCarregarBtn" disabled>Carregar</button>
                    <button id="acaoDescarregarBtn" disabled>Descarregar</button>
                </div>

                <div id="detalhesExtrasContainer">
                    <h3>Detalhes Extras (API Veículos)</h3>
                    <div id="detalhesExtrasVeiculo" class="detalhes-extras-box">
                        <p>Clique em "Ver Detalhes" em um veículo acima para carregar informações adicionais.</p>
                    </div>
                </div>

                <hr>

                 <h2>Controles de Volume</h2>
                 <div class="controles-volume">
                     <label for="volumeBuzina">Buzina:</label>
                     <input type="range" id="volumeBuzina" min="0" max="1" step="0.1" value="0.8">

                     <label for="volumeAceleracao">Aceleração:</label>
                     <input type="range" id="volumeAceleracao" min="0" max="1" step="0.1" value="0.5">

                     <label for="volumeFreio">Freio:</label>
                     <input type="range" id="volumeFreio" min="0" max="1" step="0.1" value="0.7">
                 </div>
            </div>

            <!-- Coluna de Manutenção -->
            <div class="coluna-manutencao">
                <h2>Manutenção</h2>

                <form id="formAgendamento">
                     <fieldset id="fieldsetAgendamento" disabled>
                         <legend>Agendar/Registrar Manutenção</legend>
                         <div>
                             <label for="manutencaoVeiculo">Veículo:</label>
                             <select id="manutencaoVeiculo" required>
                                 <option value="">-- Selecione --</option>
                             </select>
                         </div>
                         <div>
                             <label for="manutencaoData">Data:</label>
                             <input type="date" id="manutencaoData" required>
                         </div>
                         <div>
                             <label for="manutencaoTipo">Tipo:</label>
                             <input type="text" id="manutencaoTipo" placeholder="Ex: Troca de óleo" required>
                         </div>
                         <div>
                             <label for="manutencaoCusto">Custo (R$):</label>
                             <input type="number" id="manutencaoCusto" step="0.01" min="0" placeholder="Ex: 150.00" required>
                         </div>
                         <div>
                             <label for="manutencaoDescricao">Descrição (Opcional):</label>
                             <textarea id="manutencaoDescricao" rows="2" placeholder="Detalhes do serviço"></textarea>
                         </div>
                         <button type="submit">Agendar/Registrar</button>
                     </fieldset>
                </form>

                <hr>

                <div id="historicoManutencaoContainer">
                    <h3>Histórico de Manutenção</h3>
                    <div id="historicoManutencao">
                        <p>Selecione um veículo para ver o histórico.</p>
                    </div>
                </div>

                <hr>

                <div id="agendamentosFuturosContainer">
                    <h3>Agendamentos Futuros</h3>
                    <div id="agendamentosFuturos">
                        <p>Selecione um veículo para ver os agendamentos.</p>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <section class="container-novos-dados" id="gerenciamento-veiculos-db">
            <h2>Veículos da Garagem (Banco de Dados)</h2>
            
            <div class="form-container-db">
                <h3>Adicionar Novo Veículo</h3>
                <form id="formAdicionarVeiculo">
                    <div class="form-row">
                        <input type="text" id="veiculoPlaca" placeholder="Placa (ABC1D23)" required>
                        <input type="text" id="veiculoMarca" placeholder="Marca (Ex: Ford)" required>
                        <input type="text" id="veiculoModelo" placeholder="Modelo (Ex: Maverick)" required>
                    </div>
                    <div class="form-row">
                        <input type="number" id="veiculoAno" placeholder="Ano (Ex: 2024)" required>
                        <input type="text" id="veiculoCor" placeholder="Cor (Opcional)">
                        <button type="submit">Salvar Veículo</button>
                    </div>
                </form>
                <div id="mensagemFormVeiculo" class="mensagem" style="display: none; margin-top: 10px;"></div>
            </div>

            <h3>Veículos Registrados</h3>
            <div id="lista-veiculos-db" class="lista-container-db">
                <p>Carregando veículos do banco de dados...</p>
            </div>
        </section>

        <section id="area-de-risco" class="container-novos-dados">
            <h2>Área de Risco</h2>
            <div class="danger-zone">
                <h3>Limpeza do Banco de Dados</h3>
                <p>
                    Cuidado: A ação abaixo é irreversível e irá apagar <strong>TODOS</strong> os veículos
                    registrados no seu banco de dados. Use apenas para limpar entradas indesejadas em massa.
                </p>
                <button id="btnDeletarTodos">DELETAR TODOS OS VEÍCULOS DO BANCO DE DADOS</button>
                <div id="mensagemDelecao" class="mensagem" style="display: none; margin-top: 15px;"></div>
            </div>
        </section>
        
        <hr>

        <section id="gerenciamento-manutencoes-db" class="container-novos-dados" style="display: none;">
            <h2>Manutenções para <span id="manutencao-veiculo-selecionado-titulo">...</span></h2>
            
            <div class="form-container-db">
                <h3>Registrar Nova Manutenção</h3>
                <form id="formAdicionarManutencao">
                    <input type="hidden" id="manutencaoVeiculoId">

                    <div class="form-row">
                        <input type="text" id="manutencaoDescricaoServico" placeholder="Descrição do Serviço (Ex: Troca de óleo)" required style="flex-grow: 2;">
                        <input type="date" id="manutencaoDataServico" required>
                    </div>
                    <div class="form-row">
                        <input type="number" id="manutencaoCustoServico" placeholder="Custo (Ex: 250.50)" min="0" step="0.01" required>
                        <input type="number" id="manutencaoKmServico" placeholder="Quilometragem (Opcional)" min="0">
                        <button type="submit">Registrar Manutenção</button>
                    </div>
                </form>
                <div id="mensagemFormManutencao" class="mensagem" style="display: none; margin-top: 10px;"></div>
            </div>

            <h3>Histórico de Manutenções</h3>
            <div id="lista-manutencoes-db" class="lista-container-db">
                <p>Selecione um veículo e clique em "Ver Manutenções" para carregar o histórico.</p>
            </div>
        </section>
        
        <hr>

        <div class="container-previsao-tempo">
            <h2 id="tituloPrevisaoTempo">Previsão do Tempo (5 Dias)</h2>
            <div id="climaMensagemStatus" class="mensagem" style="display: none;"></div>

            <div class="controles-previsao-dias">
                <label>Ver previsão para:</label>
                <button class="btn-dias-previsao ativo" data-dias="5">5 Dias</button>
                <button class="btn-dias-previsao" data-dias="3">3 Dias</button>
                <button class="btn-dias-previsao" data-dias="1">1 Dia</button>
            </div>

            <div class="form-clima">
                <input type="text" id="cidadeInput" placeholder="Digite o nome da cidade">
                <button id="verificarClimaBtn">Ver Previsão</button>
            </div>

            <div id="previsaoTempoResultado" class="resultado-clima-container">
                <p>Digite uma cidade e clique em "Ver Previsão" para começar.</p>
            </div>
        </div>

        <hr>

        <div class="container-inteligente">
            <h2>Garagem Inteligente</h2>
            <p class="subtitulo-inteligente">Receba dicas de manutenção e sugestões de viagem para aproveitar ao máximo seu veículo.</p>
            
            <div class="botoes-inteligentes">
                <button id="carregarDicasBtn">Carregar Dicas e Viagens</button>
            </div>

            <div class="conteudo-inteligente">
                <div id="dicasGeraisContainer"></div>
                <div id="dicasEspecificasContainer"></div>
                <div id="viagensContainer"></div>
            </div>
        </div>

        <hr>

        <section id="secao-veiculos-destaque" class="container-novos-dados">
            <h2>Veículos em Destaque na Garagem</h2>
            <div id="cards-veiculos-destaque" class="cards-container">
                <p>Carregando destaques...</p>
            </div>
        </section>

        <hr>

        <section id="secao-servicos" class="container-novos-dados">
            <h2>Nossos Serviços</h2>
            <div id="lista-servicos-oferecidos" class="lista-container">
                <p>Carregando serviços...</p>
            </div>
        </section>

        <hr>

        <section id="secao-ferramentas" class="container-novos-dados">
            <h2>Kit Essencial do Entusiasta</h2>
            <div id="lista-ferramentas-essenciais" class="lista-container">
                 <p>Carregando ferramentas...</p>
            </div>
        </section>

    </main>
    
    <script src="script.js"></script>

</body>
</html>